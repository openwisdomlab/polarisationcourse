---
phase: 05-visual-polish-full-coverage
plan: 03
type: execute
wave: 2
depends_on: ["05-01", "05-02"]
files_modified:
  - src/i18n/locales/en.json
  - src/i18n/locales/zh.json
  - src/components/odyssey-world/HUD.tsx
  - src/components/odyssey-world/WorldMap.tsx
  - src/components/odyssey-world/depth/DepthPanelContent.tsx
  - src/components/odyssey-world/LightBeam.tsx
autonomous: false
requirements: [VISL-01, CONT-01, CONT-05]

must_haves:
  truths:
    - "All student-facing text in the Odyssey experience is available in both Chinese and English"
    - "Switching language does not require a page reload -- all text updates reactively"
    - "Region names display in the correct language in HUD, WorldMap, and depth panel"
    - "Beam glow effects are refined with softer bloom and smoother color transitions"
    - "No concept or unit is missing from the full experience"
  artifacts:
    - path: "src/i18n/locales/en.json"
      provides: "Complete English localization including region names and UI strings"
      contains: "odyssey.regions"
    - path: "src/i18n/locales/zh.json"
      provides: "Complete Chinese localization matching English content"
      contains: "odyssey.regions"
  key_links:
    - from: "src/components/odyssey-world/HUD.tsx"
      to: "i18n region names"
      via: "useTranslation + region name keys"
      pattern: "t\\(.*odyssey\\.regions"
    - from: "src/components/odyssey-world/WorldMap.tsx"
      to: "i18n region names"
      via: "useTranslation + region name keys"
      pattern: "t\\(.*odyssey\\.regions"
---

<objective>
Complete bilingual localization for all remaining Odyssey UI text, localize region names, refine beam glow effects, and perform a final integration pass to verify full 6-unit coverage and visual consistency.

Purpose: CONT-05 requires all student-facing text in both languages. Region names currently use English-only nameKey references. Beam effects need final polish for VISL-01 quality. This plan ties together the content expansion (05-01) and visual polish (05-02) into a complete, production-ready experience.

Output: Complete bilingual i18n coverage, localized region names, polished beam effects, verified full-unit coverage.
</objective>

<execution_context>
@/Users/jili/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jili/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-visual-polish-full-coverage/05-01-SUMMARY.md
@.planning/phases/05-visual-polish-full-coverage/05-02-SUMMARY.md
@.planning/phases/05-visual-polish-full-coverage/05-RESEARCH.md

# Files to audit and update:
@src/i18n/locales/en.json
@src/i18n/locales/zh.json
@src/components/odyssey-world/HUD.tsx
@src/components/odyssey-world/WorldMap.tsx
@src/components/odyssey-world/depth/DepthPanelContent.tsx
@src/components/odyssey-world/LightBeam.tsx
@src/components/odyssey-world/BeamGlowFilters.tsx
@src/components/odyssey-world/regions/regionRegistry.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Complete i18n localization -- region names, UI strings, and beam effect polish</name>
  <files>
    src/i18n/locales/en.json
    src/i18n/locales/zh.json
    src/components/odyssey-world/HUD.tsx
    src/components/odyssey-world/WorldMap.tsx
    src/components/odyssey-world/depth/DepthPanelContent.tsx
    src/components/odyssey-world/LightBeam.tsx
  </files>
  <action>
**Step 1: Add region name i18n keys to both locale files.**

Add to en.json and zh.json under `odyssey.regions`:
```
odyssey.regions.crystal-lab: "Crystal Lab" / "晶体实验室"
odyssey.regions.wave-platform: "Wave Platform" / "波动平台"
odyssey.regions.refraction-bench: "Refraction Bench" / "折射工作台"
odyssey.regions.scattering-chamber: "Scattering Chamber" / "散射实验室"
odyssey.regions.interface-lab: "Interface Lab" / "界面实验室"
odyssey.regions.measurement-studio: "Measurement Studio" / "测量工作室"
```

**Step 2: Add any missing Odyssey UI strings to both locale files.**

Audit HUD.tsx, WorldMap.tsx, DepthPanelContent.tsx, PolarizationLegend, and DiscoveryFeedback for any hardcoded English strings. Replace with i18n keys under `odyssey.ui.*`. Common candidates:
- HUD labels (settings, world map button text, back button aria labels)
- WorldMap labels (title, legend entries, fast-travel button text)
- DepthPanel tab labels (intuition, qualitative, quantitative, demo)
- PolarizationLegend labels (orientation, intensity, ellipticity)
- Discovery feedback text if any

Check existing i18n keys first -- many may already be keyed from Phase 4. Only add what's missing.

**Step 3: Update HUD.tsx to use i18n for region name display.**

Currently HUD may display region name via a direct nameKey lookup or hardcoded text. Replace with `t('odyssey.regions.' + currentRegionId)` using the useTranslation hook (already imported in the project). Ensure the region name updates reactively when the language is switched.

**Step 4: Update WorldMap.tsx to use i18n for region labels.**

Replace any hardcoded region name strings in the world map with `t('odyssey.regions.' + regionId)` calls. The world map shows region names near each region node -- these must be bilingual.

**Step 5: Refine beam glow effects in LightBeam.tsx or BeamGlowFilters.tsx.**

Per CONTEXT: "Fine-tuning on existing SVG stroke + glow -- polish glow, particles, color transitions without major rework." Make these targeted adjustments:
- Soften the main beam glow: reduce stdDeviation slightly (from current value toward 1.2-1.3 for softer, more natural bloom)
- Ensure HSL hue transitions between beam segments are continuous (no abrupt color jumps at element boundaries -- check the stroke color computation)
- Calibrate beam particle density: review useBeamParticles hook, ensure particle count (currently ~10 per segment) produces visible but restrained particles. Adjust if needed.
- Enhance the "surface-glow" radialGradient where beams cross platforms (slightly increase radius or opacity for more prominent surface illumination)

These are refinements, not rewrites. Change specific numeric values, not the rendering architecture.
  </action>
  <verify>
    pnpm run build passes with no TypeScript errors. Grep en.json for 'odyssey.regions.crystal-lab' confirms region name keys exist. Grep zh.json for '晶体实验室' confirms Chinese region names exist. Grep HUD.tsx for "t('odyssey.regions" confirms i18n usage. Grep WorldMap.tsx for "t('odyssey.regions" confirms i18n usage.
  </verify>
  <done>
    All 6 region names localized in en.json and zh.json. HUD and WorldMap display region names via i18n hooks -- language switch updates all text reactively. All hardcoded Odyssey UI strings replaced with i18n keys. Beam glow effects refined with softer bloom and smoother color transitions. Surface illumination enhanced.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Final integration verification</name>
  <files>none -- verification only</files>
  <action>
    Verify the complete Phase 5 implementation:
    - 11 new concept definitions across 4 regions (Wave Platform, Scattering Chamber, Interface Lab, Measurement Studio) covering all 6 physics units
    - 4 new interactive demo explorers (Retardation, Rayleigh, Fresnel, Stokes)
    - Unified cool scientific color palette across all 6 regions
    - Upgraded decoration SVGs with rich illustrations and subtle ambient animations
    - Full responsive design (desktop 1.0x / tablet 0.75x / mobile 0.55x zoom)
    - Complete bilingual localization (Chinese and English) for all text
    - Polished beam glow effects

    Steps:
    1. Run `pnpm run dev` and open http://localhost:5173/odyssey/
    2. **Content coverage**: Navigate to each of the 6 regions. In each region, discover at least one phenomenon. Hover on a discovered optical element -- a concept tooltip should appear. Click to open the depth panel. Verify all three layers (intuition, qualitative, quantitative) have content. For Wave Platform, Scattering Chamber, Interface Lab, and Measurement Studio, check that the "Demo" tab loads an interactive SVG explorer.
    3. **Visual atmosphere**: Look at each region. All should share a cool blue-purple-cyan base palette. Each region should have distinctive decorative details (crystals, waves, particles, glass, grids) but within a unified aesthetic. Decorations should NOT overpower the light beam.
    4. **Responsive**: Resize browser to tablet width (~800px) -- HUD should condense, zoom should adjust. Resize to mobile width (~400px) -- HUD should go minimal, depth panel should fill full width, minimap should be hidden.
    5. **Language switch**: Open settings and switch between Chinese and English. All text (region names, concept content, UI labels) should update without page reload.
    6. **Constellation map**: Open the world map. All regions should show concept nodes. Click a concept node -- depth panel should open.
    7. **Performance**: Pan and zoom around each region. Animations should be smooth (60fps on desktop, 30fps+ on mobile simulation via DevTools throttling).
  </action>
  <verify>Human confirms all 7 verification steps pass. Type "approved" or describe issues.</verify>
  <done>Phase 5 implementation verified: content coverage, visual atmosphere, responsive design, bilingual support, constellation map, and performance all confirmed by human review.</done>
</task>

</tasks>

<verification>
1. `pnpm run build` succeeds with zero TypeScript errors
2. All 6 region names present in both en.json and zh.json
3. HUD and WorldMap use i18n hooks for region name display
4. No hardcoded English strings remain in Odyssey components
5. Beam glow values adjusted for softer bloom
6. Human verification confirms: content coverage, visual quality, responsiveness, bilingual support
</verification>

<success_criteria>
- All student-facing Odyssey text is bilingual (Chinese + English)
- Language switching works without reload
- Region names display in correct language across all components
- Beam effects are refined and polished
- Human confirms the complete Phase 5 experience meets quality standards
</success_criteria>

<output>
After completion, create `.planning/phases/05-visual-polish-full-coverage/05-03-SUMMARY.md`
</output>
